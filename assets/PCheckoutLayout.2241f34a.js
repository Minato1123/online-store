import{g as l,a as _,k as e,s as F,u as A,l as B,h as E,d as T,r as f,j as z,o as D,w as O,c as C,y as b,p as w,F as U,x as Z,b as v,a3 as j,A as q,B as J,D as R,C as G,M as N,J as K,t as d,U as Q,V as W,_ as X}from"./index.2e401dab.js";import{g as Y}from"./getProductListFromShoppingCartByUserId.c011d6c8.js";import{g as ee}from"./getProductListFromBoughtByOrderId.3e1bc5f5.js";const te={class:"svg-icon",viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"},oe=e("g",{fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.675 2.5a1 1 0 0 1 1-1h6.643a1 1 0 0 1 1 1v3.875a1 1 0 0 1-1 1H6.675a1 1 0 0 1-1-1V2.5Zm2 1v1.875h4.643V3.5H7.675Z","clip-rule":"evenodd"}),e("path",{d:"M16.086 18H3.907A1.107 1.107 0 0 1 2.8 16.893V3.607c0-.611.496-1.107 1.107-1.107H7.23v2.214H5.014v11.072h9.965V4.714h-2.215V2.5h3.322c.611 0 1.107.496 1.107 1.107v13.286c0 .611-.496 1.107-1.107 1.107Z"}),e("path",{"fill-rule":"evenodd",d:"M12.567 8.677a1 1 0 0 1 .256 1.39l-1.767 2.565a1.5 1.5 0 0 1-2.154.334L7.387 11.79a1 1 0 1 1 1.226-1.58l1.097.851l1.466-2.128a1 1 0 0 1 1.391-.256Z","clip-rule":"evenodd"})],-1),ae=[oe];function se(s,t){return l(),_("svg",te,ae)}const ce={name:"pepicons-clipboard-check",render:se},de={class:"svg-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},re=e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M5 17a2 2 0 1 0 4 0a2 2 0 1 0-4 0m10 0a2 2 0 1 0 4 0a2 2 0 1 0-4 0"}),e("path",{d:"M5 17H3v-4M2 5h11v12m-4 0h6m4 0h2v-6h-8m0-5h5l3 5M3 9h4"})],-1),ne=[re];function ie(s,t){return l(),_("svg",de,ne)}const ue={name:"tabler-truck-delivery",render:ie},le={class:"svg-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},_e=e("path",{fill:"currentColor",d:"M3 10h11v2H3v-2zm0-2h11V6H3v2zm0 8h7v-2H3v2zm15.01-3.13l.71-.71a.996.996 0 0 1 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71l-2.12-2.12zm-.71.71l-5.3 5.3V21h2.12l5.3-5.3l-2.12-2.12z"},null,-1),ve=[_e];function pe(s,t){return l(),_("svg",le,ve)}const he={name:"ic-twotone-edit-note",render:pe};function me({serialNumber:s}){const{isMocked:t,mockData:p}=F(A()),{isUserTokenValid:h}=A(),{userToken:i}=F(B()),{forcedLogout:n}=B();return t.value?h(i.value)===!1?(n(),{data:{}}):p.value==null?{data:{}}:{data:p.value.orders.find(u=>u.serialNumber===s)}:E.get({url:"/orders",params:{serialNumber:s}})}const r=s=>(Q("data-v-166beda0"),s=s(),W(),s),ge={class:"checkout-container"},fe={class:"checkout-progression"},Ie=r(()=>e("div",null,"1",-1)),ke=r(()=>e("div",null,"\u586B\u5BEB\u8CC7\u6599",-1)),ye=r(()=>e("div",{class:"check-line"},null,-1)),Ce=r(()=>e("div",null,"2",-1)),be=r(()=>e("div",null,"\u4ED8\u6B3E\u8207\u9001\u8CA8\u65B9\u5F0F",-1)),we=r(()=>e("div",{class:"check-line"},null,-1)),Fe=r(()=>e("div",null,"3",-1)),Be=r(()=>e("div",null,"\u8A02\u55AE\u5B8C\u6210",-1)),Pe=q('<div class="product-bar" data-v-166beda0><div class="bar-all-product" data-v-166beda0> \u5168\u90E8\u5546\u54C1 </div><div class="bar-else" data-v-166beda0> \u898F\u683C </div><div class="bar-else" data-v-166beda0> \u55AE\u50F9 </div><div class="bar-else" data-v-166beda0> \u6578\u91CF </div><div class="bar-else" data-v-166beda0> \u5C0F\u8A08 </div></div>',1),Le={class:"product-content"},$e={class:"product-name"},Se=["src"],Ae={class:"product-spec product-else"},Ne={class:"product-price product-else"},Ve={class:"product-amount product-else"},Me={class:"product-total product-else"},xe={class:"product-rwd"},He=["src"],Ee={class:"product-rwd-else"},Te={class:"product-total"},ze=T({__name:"PCheckoutLayout",props:{target:{type:String,require:!0},orderId:{type:String}},setup(s){const t=s,{userId:p}=F(B()),h=f([]),i=f([]),n=f(),I=f([]),{startLoading:u,endLoading:m}=z();async function P(){u(),h.value=(await Y({userId:p.value})).data,m()}async function L(){u(),i.value=await Promise.all(h.value.map(async a=>{var g,o;const c=(await J({id:a.productId})).data,k=(await R({productId:a.productId})).data,y=(await G({productId:a.productId})).data;return{id:a.id,productId:a.productId,categoryId:c.categoryId,subCategoryId:c.subCategoryId,name:c.name,image:k[0].image,price:c.price,amount:a.amount,specificationId:a.specificationId,specificationName:(o=(g=y.find(H=>H.id===a.specificationId))==null?void 0:g.specName)!=null?o:"\u7121"}})),m()}async function $(){t.orderId!=null&&(u(),n.value=(await me({serialNumber:t.orderId})).data,m())}async function S(){t.orderId!=null&&(u(),I.value=(await ee({orderId:t.orderId})).data,m())}D(async()=>{t.target==="completed"?(await S(),$()):(await P(),L())}),O(t,()=>{t.target==="completed"?(S(),$()):(P(),L())},{deep:!0});const V=C(()=>t.target==="completed"?I.value:i.value),M=C(()=>t.target==="completed"?n.value==null?void 0:n.value.totalPrice:i.value.reduce((a,c)=>a+c.price*c.amount,0)),x=C(()=>t.target==="completed"?n.value==null?void 0:n.value.totalAmount:i.value.reduce((a,c)=>a+c.amount,0));return(a,c)=>{const k=he,y=ue,g=ce;return l(),_("div",ge,[e("div",fe,[e("div",{class:b(["check-data check-item",{active:t.target==="checkout"}])},[Ie,e("div",null,[w(k)]),ke],2),ye,e("div",{class:b(["check-delivery check-item",{active:t.target==="delivery"}])},[Ce,e("div",null,[w(y)]),be],2),we,e("div",{class:b(["check-data check-item",{active:t.target==="completed"}])},[Fe,e("div",null,[w(g)]),Be],2)]),Pe,e("div",Le,[(l(!0),_(U,null,Z(v(V),o=>(l(),_("div",{key:`product-cart-${o.id}`,class:"product"},[e("div",$e,[e("img",{class:"product-img",src:v(N)(o.image),alt:""},null,8,Se),K(" "+d(o.name),1)]),e("div",Ae,d(o.specificationName),1),e("div",Ne," NT$ "+d(o.price),1),e("div",Ve,d(o.amount),1),e("div",Me," NT$ "+d(o.amount*o.price),1),e("div",xe,[e("img",{class:"product-img",src:v(N)(o.image),alt:""},null,8,He),e("div",Ee,[e("div",null,d(o.name),1),e("div",null," \u898F\u683C\uFF1A"+d(o.specificationName),1),e("div",null,"\u55AE\u50F9\uFF1ANT$ "+d(o.price),1),e("div",null," \u6578\u91CF\uFF1A"+d(o.amount),1),e("div",Te," \u5C0F\u8A08\uFF1ANT$ "+d(o.amount*o.price),1)])])]))),128))]),j(a.$slots,"default",{num:v(x),total:v(M)},void 0,!0)])}}});const Ze=X(ze,[["__scopeId","data-v-166beda0"]]);export{Ze as P,me as g};
