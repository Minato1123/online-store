import{s as It,u as jt,h as Mt,d as Ot,c as Dt,j as Gt,r as nt,w as Tt,o as Vt,a as gt,k as Wt,t as Jt,b as v,f as Yt,P as Zt,g as rt,i as Ht,_ as Kt}from"./index.2e401dab.js";/** @license
 * fzf v0.5.1
 * Copyright (c) 2021-2022 Ajit
 * Licensed under BSD 3-Clause
 */const it={216:"O",223:"s",248:"o",273:"d",295:"h",305:"i",320:"l",322:"l",359:"t",383:"s",384:"b",385:"B",387:"b",390:"O",392:"c",393:"D",394:"D",396:"d",398:"E",400:"E",402:"f",403:"G",407:"I",409:"k",410:"l",412:"M",413:"N",414:"n",415:"O",421:"p",427:"t",429:"t",430:"T",434:"V",436:"y",438:"z",477:"e",485:"g",544:"N",545:"d",549:"z",564:"l",565:"n",566:"t",567:"j",570:"A",571:"C",572:"c",573:"L",574:"T",575:"s",576:"z",579:"B",580:"U",581:"V",582:"E",583:"e",584:"J",585:"j",586:"Q",587:"q",588:"R",589:"r",590:"Y",591:"y",592:"a",593:"a",595:"b",596:"o",597:"c",598:"d",599:"d",600:"e",603:"e",604:"e",605:"e",606:"e",607:"j",608:"g",609:"g",610:"G",613:"h",614:"h",616:"i",618:"I",619:"l",620:"l",621:"l",623:"m",624:"m",625:"m",626:"n",627:"n",628:"N",629:"o",633:"r",634:"r",635:"r",636:"r",637:"r",638:"r",639:"r",640:"R",641:"R",642:"s",647:"t",648:"t",649:"u",651:"v",652:"v",653:"w",654:"y",655:"Y",656:"z",657:"z",663:"c",665:"B",666:"e",667:"G",668:"H",669:"j",670:"k",671:"L",672:"q",686:"h",867:"a",868:"e",869:"i",870:"o",871:"u",872:"c",873:"d",874:"h",875:"m",876:"r",877:"t",878:"v",879:"x",7424:"A",7427:"B",7428:"C",7429:"D",7431:"E",7432:"e",7433:"i",7434:"J",7435:"K",7436:"L",7437:"M",7438:"N",7439:"O",7440:"O",7441:"o",7442:"o",7443:"o",7446:"o",7447:"o",7448:"P",7449:"R",7450:"R",7451:"T",7452:"U",7453:"u",7454:"u",7455:"m",7456:"V",7457:"W",7458:"Z",7522:"i",7523:"r",7524:"u",7525:"v",7834:"a",7835:"s",8305:"i",8341:"h",8342:"k",8343:"l",8344:"m",8345:"n",8346:"p",8347:"s",8348:"t",8580:"c"};for(let t="\u0300".codePointAt(0);t<="\u036F".codePointAt(0);++t){const e=String.fromCodePoint(t);for(const n of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){const o=(n+e).normalize().codePointAt(0);o>126&&(it[o]=n)}}const st={a:[7844,7863],e:[7870,7879],o:[7888,7907],u:[7912,7921]};for(const t of Object.keys(st)){const e=t.toUpperCase();for(let n=st[t][0];n<=st[t][1];++n)it[n]=n%2==0?e:t}function Y(t){if(t<192||t>8580)return t;const e=it[t];return e!==void 0?e.codePointAt(0):t}function B(t,e){return t>e?t:e}const vt=t=>t.split("").map(e=>e.codePointAt(0)),Qt=new Set(` \f
\r	\v\xA0\u1680\u2028\u2029\u202F\u205F\u3000\uFEFF`.split("").map(t=>t.codePointAt(0)));for(let t="\u2000".codePointAt(0);t<="\u200A".codePointAt(0);t++)Qt.add(t);const M="\x7F".codePointAt(0),W="A".codePointAt(0),J="Z".codePointAt(0),Ct="a".codePointAt(0),Lt="z".codePointAt(0),Xt="0".codePointAt(0),$t="9".codePointAt(0);function j(t,e,n){return n?t:e-t-1}var mt,S;function ot(t){return t?new Set:null}function V(t,e,n){return e!==null&&e.i16.length>t+n?[t+n,e.i16.subarray(t,t+n)]:[t,new Int16Array(n)]}function yt(t,e,n){return e!==null&&e.i32.length>t+n?[t+n,e.i32.subarray(t,t+n)]:[t,new Int32Array(n)]}function zt(t){return t>=Ct&&t<=Lt?1:t>=W&&t<=J?2:t>=Xt&&t<=$t?4:0}function At(t){const e=String.fromCodePoint(t);return e!==e.toUpperCase()?1:e!==e.toLowerCase()?2:e.match(/\p{Number}/gu)!==null?4:e.match(/\p{Letter}/gu)!==null?3:0}function K(t){return t<=M?zt(t):At(t)}function at(t,e){return t===0&&e!==0?8:t===1&&e===2||t!==4&&e===4?7:e===0?8:0}function te(t,e,n,o){let r=t.slice(o),a=r.indexOf(n);if(a===0)return o;if(!e&&n>=Ct&&n<=Lt){a>0&&(r=r.slice(0,a));const f=r.indexOf(n-32);f>=0&&(a=f)}return a<0?-1:o+a}function bt(t){for(const e of t)if(e>=128)return!1;return!0}function lt(t,e,n){if(!bt(t))return 0;if(!bt(e))return-1;let o=0,r=0;for(let a=0;a<e.length;a++){if(r=te(t,n,e[a],r),r<0)return-1;a===0&&r>0&&(o=r-1),r++}return o}(S=mt||(mt={}))[S.NonWord=0]="NonWord",S[S.Lower=1]="Lower",S[S.Upper=2]="Upper",S[S.Letter=3]="Letter",S[S.Number=4]="Number";const ee=(t,e,n,o,r,a,f)=>{const s=r.length;if(s===0)return[{start:0,end:0,score:0},ot(a)];const c=o.length;if(f!==null&&c*s>f.i16.length)return St(t,e,n,o,r,a);const d=lt(o,r,t);if(d<0)return[{start:-1,end:-1,score:0},null];let i=0,l=0,w=null,m=null,y=null,u=null;[i,w]=V(i,f,c),[i,m]=V(i,f,c),[i,y]=V(i,f,c),[l,u]=yt(l,f,s);const[,P]=yt(l,f,c);for(let p=0;p<P.length;p++)P[p]=o[p];let g=0,A=0,O=0,D=0;const xt=r[0];let ut=r[0],Q=0,ct=0,X=!1,G=P.subarray(d),$=w.subarray(d).subarray(0,G.length),ft=m.subarray(d).subarray(0,G.length),Ft=y.subarray(d).subarray(0,G.length);for(let[p,h]of G.entries()){let b=null;h<=M?(b=zt(h),t||b!==2||(h+=32)):(b=At(h),t||b!==2||(h=String.fromCodePoint(h).toLowerCase().codePointAt(0)),e&&(h=Y(h))),G[p]=h;const C=at(ct,b);if(Ft[p]=C,ct=b,h===ut&&(O<s&&(u[O]=d+p,O++,ut=r[Math.min(O,s-1)]),D=d+p),h===xt){const L=16+2*C;if($[p]=L,ft[p]=1,s===1&&(n&&L>g||!n&&L>=g)&&(g=L,A=d+p,n&&C===8))break;X=!1}else $[p]=B(X?Q+-1:Q+-3,0),ft[p]=0,X=!0;Q=$[p]}if(O!==s)return[{start:-1,end:-1,score:0},null];if(s===1){const p={start:A,end:A+1,score:g};if(!a)return[p,null];const h=new Set;return h.add(A),[p,h]}const k=u[0],x=D-k+1;let R=null;[i,R]=V(i,f,x*s);{const p=w.subarray(k,D+1);for(const[h,b]of p.entries())R[h]=b}let[,U]=V(i,f,x*s);{const p=m.subarray(k,D+1);for(const[h,b]of p.entries())U[h]=b}const dt=u.subarray(1),Rt=r.slice(1).slice(0,dt.length);for(const[p,h]of dt.entries()){let b=!1;const C=Rt[p],L=p+1,N=L*x,z=P.subarray(h,D+1),pt=y.subarray(h).subarray(0,z.length),Nt=U.subarray(N+h-k).subarray(0,z.length),qt=U.subarray(N+h-k-1-x).subarray(0,z.length),Bt=R.subarray(N+h-k).subarray(0,z.length),Ut=R.subarray(N+h-k-1-x).subarray(0,z.length),et=R.subarray(N+h-k-1).subarray(0,z.length);et[0]=0;for(const[F,Et]of z.entries()){const ht=F+h;let E=0,Z=0,I=0;if(Z=b?et[F]+-1:et[F]+-3,C===Et){E=Ut[F]+16;let T=pt[F];I=qt[F]+1,T===8?I=1:I>1&&(T=B(T,B(4,y[ht-I+1]))),E+T<Z?(E+=pt[F],I=0):E+=T}Nt[F]=I,b=E<Z;const H=B(B(E,Z),0);L===s-1&&(n&&H>g||!n&&H>=g)&&(g=H,A=ht),Bt[F]=H}}const tt=ot(a);let q=k;if(a&&tt!==null){let p=s-1;q=A;let h=!0;for(;;){const b=p*x,C=q-k,L=R[b+C];let N=0,z=0;if(p>0&&q>=u[p]&&(N=R[b-x+C-1]),q>u[p]&&(z=R[b+C-1]),L>N&&(L>z||L===z&&h)){if(tt.add(q),p===0)break;p--}h=U[b+C]>1||b+x+C+1<U.length&&U[b+x+C+1]>0,q--}}return[{start:q,end:A+1,score:g},tt]};function kt(t,e,n,o,r,a,f){let s=0,c=0,d=!1,i=0,l=0;const w=ot(f);let m=0;r>0&&(m=K(n[r-1]));for(let y=r;y<a;y++){let u=n[y];const P=K(u);if(t||(u>=W&&u<=J?u+=32:u>M&&(u=String.fromCodePoint(u).toLowerCase().codePointAt(0))),e&&(u=Y(u)),u===o[s]){f&&w!==null&&w.add(y),c+=16;let g=at(m,P);i===0?l=g:(g===8&&(l=g),g=B(B(g,l),4)),c+=s===0?2*g:g,d=!1,i++,s++}else c+=d?-1:-3,d=!0,i=0,l=0;m=P}return[c,w]}const St=(t,e,n,o,r,a,f)=>{if(r.length===0)return[{start:0,end:0,score:0},null];if(lt(o,r,t)<0)return[{start:-1,end:-1,score:0},null];let s=0,c=-1,d=-1;const i=o.length,l=r.length;for(let w=0;w<i;w++){let m=o[j(w,i,n)];if(t||(m>=W&&m<=J?m+=32:m>M&&(m=String.fromCodePoint(m).toLowerCase().codePointAt(0))),e&&(m=Y(m)),m===r[j(s,l,n)]&&(c<0&&(c=w),s++,s===l)){d=w+1;break}}if(c>=0&&d>=0){s--;for(let y=d-1;y>=c;y--){let u=o[j(y,i,n)];if(t||(u>=W&&u<=J?u+=32:u>M&&(u=String.fromCodePoint(u).toLowerCase().codePointAt(0))),u===r[j(s,l,n)]&&(s--,s<0)){c=y;break}}if(!n){const y=c;c=i-d,d=i-y}const[w,m]=kt(t,e,o,r,c,d,a);return[{start:c,end:d,score:w},m]}return[{start:-1,end:-1,score:0},null]},ne=(t,e,n,o,r,a,f)=>{if(r.length===0)return[{start:0,end:0,score:0},null];const s=o.length,c=r.length;if(s<c)return[{start:-1,end:-1,score:0},null];if(lt(o,r,t)<0)return[{start:-1,end:-1,score:0},null];let d=0,i=-1,l=0,w=-1;for(let u=0;u<s;u++){const P=j(u,s,n);let g=o[P];t||(g>=W&&g<=J?g+=32:g>M&&(g=String.fromCodePoint(g).toLowerCase().codePointAt(0))),e&&(g=Y(g));const A=j(d,c,n);if(r[A]===g){if(A===0&&(m=o,l=(y=P)===0?8:at(K(m[y-1]),K(m[y]))),d++,d===c){if(l>w&&(i=u,w=l),l===8)break;u-=d-1,d=0,l=0}}else u-=d,d=0,l=0}var m,y;if(i>=0){let u=0,P=0;n?(u=i-c+1,P=i+1):(u=s-(i+1),P=s-(i-c+1));const[g]=kt(t,e,o,r,u,P,!1);return[{start:u,end:P,score:g},null]}return[{start:-1,end:-1,score:0},null]},re=(wt=2048,{i16:new Int16Array(102400),i32:new Int32Array(wt)});var wt,Pt,_;(_=Pt||(Pt={}))[_.Fuzzy=0]="Fuzzy",_[_.Exact=1]="Exact",_[_.Prefix=2]="Prefix",_[_.Suffix=3]="Suffix",_[_.Equal=4]="Equal";const se=(t,e,n)=>{let o=!1;switch(e){case"smart-case":t.toLowerCase()!==t&&(o=!0);break;case"case-sensitive":o=!0;break;case"case-insensitive":t=t.toLowerCase(),o=!1}let r=vt(t);return n&&(r=r.map(Y)),{queryRunes:r,caseSensitive:o}};function oe(t,e){const n=Object.keys(t).map(r=>parseInt(r,10)).sort((r,a)=>a-r);let o=[];for(const r of n)if(o=o.concat(t[r]),o.length>=e)break;return o}function ie(t,e,n){return o=>{const r=this.runesList[o];if(e.length>r.length)return;let[a,f]=this.algoFn(n,this.opts.normalize,this.opts.forward,r,e,!0,re);if(a.start===-1)return;if(this.opts.fuzzy===!1){f=new Set;for(let c=a.start;c<a.end;++c)f.add(c)}const s=this.opts.sort?a.score:0;t[s]===void 0&&(t[s]=[]),t[s].push({item:this.items[o],...a,positions:f!=null?f:new Set})}}function ae(t){const{queryRunes:e,caseSensitive:n}=se(t,this.opts.casing,this.opts.normalize),o={},r=ie.bind(this)(o,e,n);for(let a=0,f=this.runesList.length;a<f;++a)r(a);return oe(o,this.opts.limit)}const _t={limit:1/0,selector:t=>t,casing:"smart-case",normalize:!0,fuzzy:"v2",tiebreakers:[],sort:!0,forward:!0};class le{constructor(e,...n){switch(this.opts={..._t,...n[0]},this.items=e,this.runesList=e.map(o=>vt(this.opts.selector(o).normalize())),this.algoFn=ne,this.opts.fuzzy){case"v2":this.algoFn=ee;break;case"v1":this.algoFn=St}}}const ue={..._t,match:ae};class ce extends le{constructor(e,...n){super(e,...n),this.opts={...ue,...n[0]}}find(e){return e.length===0||this.items.length===0?this.items.slice(0,this.opts.limit).map(fe):(e=e.normalize(),de(this.opts.match.bind(this)(e),this.opts))}}const fe=t=>({item:t,start:-1,end:-1,score:0,positions:new Set});function de(t,e){if(e.sort){const{selector:n}=e;t.sort((o,r)=>{if(o.score===r.score)for(const a of e.tiebreakers){const f=a(o,r,n);if(f!==0)return f}return 0})}return Number.isFinite(e.limit)&&t.splice(e.limit),t}class pe{constructor(e,...n){this.finder=new ce(e,...n),this.find=this.finder.find.bind(this.finder)}}function he({currentPage:t,pageSize:e,query:n,sortBy:o,orderBy:r}){const{isMocked:a,mockData:f}=It(jt());if(!a.value)return Mt.get({url:"/products",params:{currentPage:t,pageSize:e,query:n,sortBy:o,orderBy:r}});if(f.value==null)return{data:{}};let s=[...f.value.products];const c=n.split(" ").join("");return s=new pe(s,{selector:i=>i.name}).find(c).map(({item:i})=>i),o==="id"?r==="asc"?s.sort((i,l)=>i.id-l.id):r==="desc"&&s.sort((i,l)=>l.id-i.id):o==="name"?r==="asc"?s.sort((i,l)=>i.name.localeCompare(l.name)):r==="desc"&&s.sort((i,l)=>l.name.localeCompare(i.name)):o==="price"&&(r==="asc"?s.sort((i,l)=>i.price-l.price):r==="desc"&&s.sort((i,l)=>l.price-i.price)),{data:{productList:s.slice(e*(t-1),t*e),pagination:{first:1,prev:t>1?t-1:null,next:t<Math.ceil(s.length/e)?t+1:null,last:Math.ceil(s.length/e)}}}}const ge={class:"follow-container"},me={class:"follow-bar"},ye={key:1,class:"empty-follow"},be=Ot({__name:"SearchResult",setup(t){const e=Ht(),n=Dt(()=>String(e.query.keyword)),{startLoading:o,endLoading:r}=Gt(),a=nt(),f=nt(),s=nt({currentPage:1,pageSize:6,query:n.value,sortBy:"id",orderBy:"asc"});async function c(){o();const d=(await he(s.value)).data;r(),a.value=d.productList,f.value=d.pagination}return Tt([s,n],async()=>{s.value.query=n.value,await c()},{deep:!0}),Vt(()=>{c()}),(d,i)=>(rt(),gt("div",ge,[Wt("div",me,Jt(v(s).query)+" \u7684\u641C\u5C0B\u7D50\u679C\uFF1A ",1),v(a)!=null&&v(a).length>0?(rt(),Yt(Zt,{key:0,"current-page":v(s).currentPage,"onUpdate:current-page":i[0]||(i[0]=l=>v(s).currentPage=l),"page-size":v(s).pageSize,"onUpdate:page-size":i[1]||(i[1]=l=>v(s).pageSize=l),"sort-by":v(s).sortBy,"onUpdate:sort-by":i[2]||(i[2]=l=>v(s).sortBy=l),"order-by":v(s).orderBy,"onUpdate:order-by":i[3]||(i[3]=l=>v(s).orderBy=l),"product-list":v(a),"total-num-of-products":0,pagination:v(f),"has-page-attr":!1},null,8,["current-page","page-size","sort-by","order-by","product-list","pagination"])):(rt(),gt("div",ye," \u6C92\u6709\u641C\u5C0B\u5230\u4EFB\u4F55\u5546\u54C1\u3002 "))]))}});const Pe=Kt(be,[["__scopeId","data-v-aaa2a28a"]]);export{Pe as default};
