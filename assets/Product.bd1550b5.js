import{g as s,a as u,k as e,s as J,u as vt,h as pt,d as Bt,c as x,r as d,j as wt,l as Pt,m as Dt,n as xt,w as Et,o as St,b as t,p as C,q as y,f,e as l,v as I,S as Lt,F as w,x as E,y as V,t as p,T as it,z as lt,A as Vt,B as Tt,C as Nt,D as $t,E as Ut,G as Rt,H as Mt,I as zt,R as j,J as T,K as N,L as G,M as ct,N as qt,O as dt,Q as rt,U as Ot,V as Ht,i as Kt,W as Zt,X as jt,Y as Gt,Z as Jt,$ as Qt,a0 as Wt,a1 as Xt,_ as Yt}from"./index.2e401dab.js";import{g as te}from"./getCategory.d62f7851.js";import{g as ee}from"./getSubCategory.0242347d.js";const se={class:"svg-icon",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ae=e("path",{fill:"currentColor",d:"m12 3l8 6v12h-5v-7H9v7H4V9l8-6Z"},null,-1),oe=[ae];function ue(_,b){return s(),u("svg",se,oe)}const ne={name:"mdi-home-variant",render:ue};function ie({productId:_}){const{isMocked:b,mockData:m}=J(vt());if(!b.value)return pt.get({url:"/productDescription",params:{productId:_}});if(m.value==null)return{data:[]};const F=m.value.productDescription.filter(g=>g.productId===_);return F==null?{data:[]}:{data:F}}function le({productId:_,subCategoryId:b}){const{isMocked:m,mockData:a}=J(vt());return m.value?a.value==null?{data:{productList:[]}}:{data:{productList:[...a.value.products].filter(g=>g.id!==_&&g.subCategoryId===b)}}:pt.get({url:"/products",params:{productId:_,subCategoryId:b}})}const r=_=>(Ot("data-v-0215c75a"),_=_(),Ht(),_),ce={key:0,class:"product-container"},de={class:"breadcrumb"},re=r(()=>e("span",null,"/",-1)),ve=r(()=>e("span",null,"/",-1)),pe={class:"product-main-container"},_e={key:0,class:"image-block"},me={class:"product-images-list"},fe=["value"],ge=["src"],Ce={class:"content-block"},he={class:"title"},ye={class:"description"},be={class:"follow-price"},Fe={class:"price"},ke={class:"spec-amount"},Ie={class:"spec-block"},Ae=r(()=>e("div",{class:"subtitle"}," \u898F\u683C ",-1)),Be={class:"spec-subblock"},we=["value"],Pe={key:1,class:"spec-subblock"},De={class:"spec-label spec-active"},xe={class:"amount-block"},Ee=r(()=>e("div",{class:"subtitle"}," \u6578\u91CF ",-1)),Se={class:"buy-btns"},Le=r(()=>e("div",{class:"postscript"}," \u4ED8\u6B3E\u5F8C\uFF0C\u5F9E\u5099\u8CA8\u5230\u5BC4\u51FA\u5546\u54C1\u70BA 2~4 \u500B\u5DE5\u4F5C\u5929\uFF08\u4E0D\u5305\u542B\u5047\u65E5\uFF09\uFF0C\u8ACB\u8010\u5FC3\u7B49\u5019\u3002 ",-1)),Ve=Vt('<ul class="activity-list" data-v-0215c75a><li class="activity" data-v-0215c75a><div class="activity-title activity-global" data-v-0215c75a> \u5168\u9928\u6D3B\u52D5 </div><div class="activity-content" data-v-0215c75a><span data-v-0215c75a>09/09-09/21</span><span data-v-0215c75a>\u9031\u5E74\u6176\u5168\u9928\u6298\u6263</span></div></li><li class="activity" data-v-0215c75a><div class="activity-title" data-v-0215c75a> \u8A02\u55AE\u52A0\u50F9\u8CFC </div><div class="activity-content" data-v-0215c75a><span data-v-0215c75a>09/07-10/02</span><span data-v-0215c75a>\u6EFF800\u5143\u53EF\u52A0\u8CFC\u9020\u578B\u77FD\u81A0\u6372\u7DDA\u593E(\u672C\u5340\u9650\u8CFC3\u500B)</span></div></li><li class="activity" data-v-0215c75a><div class="activity-title" data-v-0215c75a> \u8A02\u55AE\u52A0\u50F9\u8CFC </div><div class="activity-content" data-v-0215c75a><span data-v-0215c75a>09/09-10/02</span><span data-v-0215c75a>\u8CFC\u7269\u6EFF3000\uFF0C\u9650\u6642\u52A0\u8D08\u4E09\u9E97\u9DD7\u660E\u661F\u89AA\u611B\u62B1\u62B1\u7B46\u888B</span></div></li></ul>',1),Te={class:"product-info-container"},Ne={class:"info-title"},$e=r(()=>e("div",{class:"line"},null,-1)),Ue={key:0,class:"info-images"},Re=["src"],Me={key:1,class:"info-detail"},ze={key:0,class:"info-line"},qe=r(()=>e("div",{class:"info-subtitle"}," \u5546\u54C1\u5C3A\u5BF8 ",-1)),Oe={class:"info-content"},He={key:1,class:"info-line"},Ke=r(()=>e("div",{class:"info-subtitle"}," \u5305\u88DD\u5C3A\u5BF8 ",-1)),Ze={class:"info-content"},je={key:2,class:"info-line"},Ge=r(()=>e("div",{class:"info-subtitle"}," \u7522\u5730 ",-1)),Je={class:"info-content"},Qe={key:3,class:"info-line"},We=r(()=>e("div",{class:"info-subtitle"}," \u6750\u8CEA ",-1)),Xe={class:"info-content"},Ye={key:4,class:"info-line"},ts=r(()=>e("div",{class:"info-subtitle"}," \u5167\u5BB9\u7269 ",-1)),es={class:"info-content"},ss={key:5,class:"info-line"},as=r(()=>e("div",{class:"info-subtitle"}," \u91CD\u91CF ",-1)),os={class:"info-content"},us={key:0,class:"else-products"},ns=r(()=>e("div",{class:"else-title"}," \u63A8\u85A6\u5546\u54C1 ",-1)),is={class:"products"},ls=Bt({__name:"Product",setup(_){const b=Kt(),m=x(()=>b.params.productId),a=d(null),F=d([]),g=d([]),Q=d([]),A=d(null),S=d(null),$=d([]),L=d([]),{startLoading:P,endLoading:D}=wt(),{userId:U,isLoggedIn:R}=J(Pt()),{addLocalCart:_t}=Dt(),{emit:mt}=xt();async function W(){P(),a.value=(await Tt({id:Number(m.value)})).data,D()}async function X(){P(),F.value=(await Nt({productId:Number(m.value)})).data,D()}async function Y(){P(),g.value=(await $t({productId:Number(m.value)})).data,D()}async function tt(){P(),Q.value=(await ie({productId:Number(m.value)})).data,D()}async function et(){a.value!=null&&(A.value=(await te({id:Number(a.value.categoryId)})).data)}async function st(){a.value!=null&&(S.value=(await ee({id:Number(a.value.subCategoryId)})).data)}async function at(){a.value!=null&&(P(),$.value=(await le({productId:a.value.id,subCategoryId:Number(a.value.subCategoryId)})).data.productList,D())}async function M(){R.value?L.value=(await Ut({userId:U.value})).data:L.value=[]}Et(m,async()=>{await W(),X(),Y(),tt(),et(),st(),at(),M()}),St(async()=>{await W(),X(),Y(),tt(),et(),st(),at(),M()});const ot=x(()=>new Set(L.value.map(i=>i.productId)));async function ft(){if(R.value===!1)return;const i=a.value;if(i!=null){if(ot.value.has(i.id)){const o=L.value.find(H=>H.productId===i.id);o!=null&&await Zt({id:o.id})}else await jt({productId:i.id,userId:U.value});M()}}const k=d(0),v=d(null),ut=x(()=>a.value==null?!1:F.value.length>0),h=d(1),B=d("image"),gt={text:"\u52A0\u5165\u8CFC\u7269\u8ECA",color:"match-color",beforeTextIcon:Gt},Ct={text:"\u76F4\u63A5\u8CFC\u8CB7",color:"main-product-color"},ht={iconBeforeText:Jt,text:"\u5DF2\u52A0\u5165\u8CFC\u7269\u8ECA",color:"main-color",borderColor:"main-color"},yt={text:"\u52A0\u5165\u5931\u6557\uFF01",additionalText:"\u8ACB\u7A0D\u5F8C\u518D\u8A66\u3002",color:"main-product-color",borderColor:"main-product-olor",textInBtnOK:{text:"\u78BA\u5B9A",color:"main-product-color"}},z=d(!1),q=d(!1),O=d(!1);async function bt(){const i=a.value;if(i!=null){try{R.value?await Rt({userId:U.value,productId:i.id,specificationId:v.value,amount:h.value}):await _t(i.id,v.value,h.value),mt(),z.value=!0,window.setTimeout(()=>{z.value=!1},800)}catch{q.value=!0}O.value&&Mt.push({name:"cart"}),O.value=!1}}const Ft=x(()=>{var i;return a.value==null?null:(i=g.value.map(o=>o.image))!=null?i:null}),nt=x(()=>{var i;return{slides:(i=Ft.value)!=null?i:[],height:"100%",hasPage:!1,hasTimeInterval:!1,btnColor:"black"}});return(i,o)=>{const H=ne,kt=Wt,It=Xt,K=zt("FormKit");return s(),u(w,null,[t(a)!=null?(s(),u("div",ce,[e("div",de,[C(t(j),{class:"link-btn",to:{name:"home"}},{default:y(()=>[C(H)]),_:1}),re,t(A)!=null?(s(),f(t(j),{key:0,class:"link-btn",to:{name:"categories",params:{categoryId:t(A).id}}},{default:y(()=>[T(p(t(A).name),1)]),_:1},8,["to"])):l("",!0),ve,t(S)!=null&&t(A)!=null?(s(),f(t(j),{key:1,class:"link-btn",to:{name:"subCategories",params:{categoryId:t(A).id,subCategoryId:t(S).id}}},{default:y(()=>[T(p(t(S).name),1)]),_:1},8,["to"])):l("",!0)]),e("div",pe,[t(nt).slides!=null?(s(),u("div",_e,[C(Lt,{selectedPage:t(k),"onUpdate:selectedPage":o[0]||(o[0]=n=>I(k)?k.value=n:null),"slides-config":t(nt)},null,8,["selectedPage","slides-config"]),e("div",me,[(s(!0),u(w,null,E(t(g),(n,c)=>(s(),u("label",{key:`image-${c}`,class:V([{active:t(k)===c},"product-image-radio"])},[N(e("input",{"onUpdate:modelValue":o[1]||(o[1]=Z=>I(k)?k.value=Z:null),class:"hidden",type:"radio",name:"product-image",value:c},null,8,fe),[[G,t(k)]]),e("img",{class:"product-image",src:t(ct)(n.image)},null,8,ge)],2))),128))])])):l("",!0),C(K,{"form-class":"$reset",type:"form",actions:!1,"incomplete-message":" ",onSubmit:bt,onSubmitInvalid:o[8]||(o[8]=()=>{})},{default:y(()=>[e("div",Ce,[e("div",he,p(t(a).name),1),e("div",ye,[(s(!0),u(w,null,E(t(Q),(n,c)=>(s(),u("div",{key:`decs-${c}`},p(n.description),1))),128))]),e("div",be,[e("button",{type:"button",onClick:ft},[t(ot).has(t(a).id)?(s(),f(kt,{key:0})):(s(),f(It,{key:1}))]),e("div",Fe," NT$ "+p(t(a).price),1)]),e("div",ke,[e("div",Ie,[Ae,t(ut)?(s(),f(K,{key:0,modelValue:t(v),"onUpdate:modelValue":o[3]||(o[3]=n=>I(v)?v.value=n:null),validation:"required","validation-visibility":"live","validation-messages":{required:"\u8ACB\u9078\u64C7\u898F\u683C"}},{wrapper:y(n=>[e("div",Be,[(s(!0),u(w,null,E(t(F),(c,Z)=>(s(),u("label",{key:`spec-${Z}`,class:V(["spec-label",{"spec-active":t(v)===c.id}])},[N(e("input",{"onUpdate:modelValue":o[2]||(o[2]=At=>I(v)?v.value=At:null),class:"spec-radio hidden",type:"radio",name:"specifications",value:c.id},null,8,we),[[G,t(v)]]),T(" "+p(c.specName),1)],2))),128))])]),_:1},8,["modelValue"])):l("",!0),t(ut)?l("",!0):(s(),u("div",Pe,[e("label",De,[N(e("input",{"onUpdate:modelValue":o[4]||(o[4]=n=>I(v)?v.value=n:null),class:"spec-radio hidden",type:"radio",name:"specifications",value:"null",disabled:""},null,512),[[G,t(v)]]),T(" \u7121 ")])]))]),e("div",xe,[Ee,C(K,{modelValue:t(h),"onUpdate:modelValue":o[6]||(o[6]=n=>I(h)?h.value=n:null),validation:"required|between:1,10","validation-visibility":"live","validation-messages":{required:"\u8ACB\u8F38\u5165\u6578\u91CF",between:"\u8ACB\u8F38\u5165 1~10 \u7684\u6578\u91CF"}},{wrapper:y(n=>[N(e("input",{"onUpdate:modelValue":o[5]||(o[5]=c=>I(h)?h.value=c:null),name:"amount",class:"amount-input",type:"number",min:"1",max:"10"},null,512),[[qt,t(h)]])]),_:1},8,["modelValue"])])]),e("div",Se,[C(dt,{class:"btn",content:gt}),C(dt,{class:"btn",content:Ct,onClick:o[7]||(o[7]=n=>O.value=!0)})]),Le])]),_:1})]),Ve,e("div",Te,[e("div",Ne,[e("button",{class:V({active:t(B)==="image"}),onClick:o[9]||(o[9]=n=>B.value="image")}," \u5546\u54C1\u4ECB\u7D39 ",2),e("button",{class:V({active:t(B)==="info"}),onClick:o[10]||(o[10]=n=>B.value="info")}," \u898F\u683C\u8AAA\u660E ",2)]),$e,t(B)==="image"?(s(),u("div",Ue,[(s(!0),u(w,null,E(t(g),(n,c)=>(s(),u("img",{key:`main-image-${c}`,src:t(ct)(n.image),alt:""},null,8,Re))),128))])):l("",!0),t(B)==="info"?(s(),u("div",Me,[t(a).size!=null?(s(),u("div",ze,[qe,e("div",Oe,p(t(a).size),1)])):l("",!0),t(a).wrapSize!=null?(s(),u("div",He,[Ke,e("div",Ze,p(t(a).wrapSize),1)])):l("",!0),t(a).origin!=null?(s(),u("div",je,[Ge,e("div",Je,p(t(a).origin),1)])):l("",!0),t(a).material!=null?(s(),u("div",Qe,[We,e("div",Xe,p(t(a).material),1)])):l("",!0),t(a).content!=null?(s(),u("div",Ye,[ts,e("div",es,p(t(a).content),1)])):l("",!0),t(a).weight!=null?(s(),u("div",ss,[as,e("div",os,p(t(a).weight),1)])):l("",!0)])):l("",!0)]),t($).length>0?(s(),u("div",us,[ns,e("div",is,[(s(!0),u(w,null,E(t($),(n,c)=>(s(),f(Qt,{key:`recommend-product-${c}`,product:n},null,8,["product"]))),128))])])):l("",!0)])):l("",!0),(s(),f(lt,{to:"body"},[C(it,null,{default:y(()=>[t(z)?(s(),f(rt,{key:0,"text-in-dialog":ht})):l("",!0)]),_:1})])),(s(),f(lt,{to:"body"},[C(it,null,{default:y(()=>[t(q)?(s(),f(rt,{key:0,"text-in-dialog":yt,onCloseInfoDialog:o[11]||(o[11]=n=>q.value=!1)})):l("",!0)]),_:1})]))],64)}}});const vs=Yt(ls,[["__scopeId","data-v-0215c75a"]]);export{vs as default};
